<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Login Page</title>
      <link rel="stylesheet" href="/index.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" />
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
      <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
      <section id="header">
            <div>
                  <a href="#"><img src="images/london.png" alt="Error" class="logo"></a>
            </div>
            
            <div>
                  <ul id="navbar" class="item flex">
                        <li><a href="index.html" class="active">home</a> </li>
                        <li><a href="/pages/shop.html">shop</a></li>
                        <li><a href="blog.html">blog</a></li>
                        <li><a href="contact.html">contact</a></li>
                        <li class="nav-item dropdown">
                              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                User
                              </a>
                              <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/Register.html">Register</a></li>
                                <li><a class="dropdown-item" href="/login.html">Login</a></li>

                              </ul> 
                            </li>

                        <li id="lg-bag"><a href="cart.html"><i class="fa-solid fa-bag-shopping"></i></a></li>
                        <a href="#" id="close">
                              <i class="fa-solid fa-xmark"></i>
                        </a>
                  </ul>
            </div>
            <div id="mobile">
                  <a href="/cart.html"><i class="fa-solid fa-bag-shopping"></i></a>
                  <i id="bar" class="fas fa-outdent"></i>
            </div>
      </section>
      <div class="form-container">
            <form id="loginForm">
                  <h4 class="title">Login Page</h4> <br>
                  <div class="mb-3"><label for="exampleInputName1" class="form-label">Name</label><input
                        type="text" class="form-control" id="exampleInputName1" aria-describedby="emailHelp"
                        required="" value=""></div>
                  <div class="mb-3"><label for="exampleInputEmail1" class="form-label">Email address</label><input
                              type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
                              required="" value=""></div>
                  <div class="mb-3"><label for="exampleInputPassword1" class="form-label">Password</label><input
                              type="password" class="form-control" id="exampleInputpass1" required="" value=""></div>
                  <button class="btn btn-primary">Login</button>
            </form>
      </div>
      <section id="sign" class="flex section-p1 section-m1">
            <div class="news">
                  <h2>Sign Up For Newsletters</h2>
                  <p>Get E-mail updates about our latest shop and
                        <span class="yellow">special offers.</span>
                  </p>
            </div>
            <div class="up">
                  <input type="text" placeholder="Your Email Address" class="email">
                  <button class="sp exp">Sign Up</button>
            </div>
      </section>
      <footer class="section-p1">
            <div class="col">
                  <img src="/images/london.png" alt="" class="logo">
                  <h4>Contact</h4>
                  <p><strong>Address : </strong>562 Wellington Road, Street 32, Los Angeles, USA</p>
                  <p><strong>Phone : </strong>+91 9897145370</p>
                  <p><strong>Hours : </strong>10:00 AM - 6:00 PM, Mon - Sat</p>
                  <h4>Follow Us</h4>
                  <div class="follow">
                        <div class="icon">
                              <i class="fab fa-facebook-f"></i>
                              <i class="fab fa-twitter"></i>
                              <i class="fab fa-instagram"></i>
                              <i class="fab fa-pinterest"></i>
                              <i class="fab fa-youtube"></i>
                        </div>
                  </div>
            </div>
            <div class="col">
                  <h4>About</h4>
                  <a href="/about.html">About Us</a>
                  <a href="#">Delivery Information</a>
                  <a href="#">Privacy Policy</a>
                  <a href="#">Terms & Conditions</a>
                  <a href="/contact.html">Contact Us</a>
            </div>
            <div class="col">
                  <h4>My Account</h4>
                  <a href="/login.html">Sign In</a>
                  <a href="/cart.html">View Cart</a>
                  <a href="#">My Wishlist</a>
                  <a href="#">Track my Order</a>
                  <a href="#">Help</a>
            </div>
            <div class="col install">
                  <h4>Install App</h4>
                  <p>From App Store or Google Play <br></p>
                  <div class="store">
                        <img src="/images/Pay/app.jpg" alt="">
                        <img src="/images/Pay/play.jpg" alt="">
                  </div>
                  <p>Secured Payment Gateways <br></p>
                  <img src="/images/Pay/pay.png" alt="">
            </div>
            <div class="copyright">
                  <p>@ 2023, Sandhya etc- HTML CSS Ecommerce Template</p>
            </div>
      </footer>
      
      <script src="/script.js"></script>

      <script>
            document.getElementById('loginForm').addEventListener('submit', function(event) {
                  event.preventDefault(); // Prevent form submission
                
                  var name = document.getElementById('exampleInputName1').value;
                  var email = document.getElementById('exampleInputEmail1').value;
                  var password = document.getElementById('exampleInputpass1').value;
                  
                
                  axios.post('http://localhost:8000/api/v1/auth/login', {
                     name : name,
                      email: email,
                      password: password
                    })
                    .then(function(response) {
                      // Handle the response data
                      alert(response.data.message);
                      console.log(response.data);
                      if(response.data.success==true){
                            localStorage.setItem('username', name);
                            window.location.href="index.html";
                      }
                      // Redirect to another page if needed
                    })
                    .catch(function(error) {
                      // Handle any errors
                      console.error(error);
                    });
                });
      </script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js" integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js" integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ" crossorigin="anonymous"></script>


      <script>
            // Get the username from local storage
            var username = localStorage.getItem('username');
            
            if (username) {
              // Replace "Register" and "Login" options with username and logout
              var dropdownContent = document.querySelector('.dropdown-menu');
              dropdownContent.innerHTML = `
                <li><a href="#">${username}</a></li>
                <li><a href="#" id="logoutBtn">Logout</a></li>
              `;
            
              // Add event listener to the logout button
              document.getElementById('logoutBtn').addEventListener('click', function(event) {
                event.preventDefault();
            
                // Clear the username from local storage
                localStorage.removeItem('username');
            
                // Redirect to the login page or perform any other actions
                window.location.href = "login.html";
              });
            }
          </script>

</body>

</html>